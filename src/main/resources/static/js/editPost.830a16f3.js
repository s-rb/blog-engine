(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editPost"],{2532:function(t,e,a){"use strict";var i=a("23e7"),n=a("5a34"),s=a("1d80"),r=a("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~String(s(this)).indexOf(n(t),arguments.length>1?arguments[1]:void 0)}})},"2bb6":function(t,e,a){"use strict";var i=a("5595"),n=a.n(i);n.a},"44e7":function(t,e,a){var i=a("861d"),n=a("c6b6"),s=a("b622"),r=s("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==n(t))}},5595:function(t,e,a){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var i=a("1d80"),n=a("5899"),s="["+n+"]",r=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),o=function(t){return function(e){var a=String(i(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(c,"")),a}};t.exports={start:o(1),end:o(2),trim:o(3)}},"5a34":function(t,e,a){var i=a("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5b31":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main",{staticClass:"EditText Wrapper",class:t.className},[i("div",{staticClass:"Title EditText-Title"},[t.isEditPost?[t._v(" Редактирование публикации ")]:[t._v(" Новая публикация ")]],2),i("div",{staticClass:"EditText-Section EditText-Info"},[i("div",{staticClass:"EditText-Date EditText-Section--size_half"},[i("div",{staticClass:"EditText-Label EditText-Label--width_fixed"},[t._v(" Дата публикации ")]),i("div",{staticClass:"EditText-Input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"Input",attrs:{type:"datetime-local"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])]),i("div",{staticClass:"EditText-Hide CheckForm"},[i("label",{staticClass:"CheckForm-Label"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.active,expression:"active"}],staticClass:"CheckForm-Input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.active)?t._i(t.active,null)>-1:t.active},on:{change:function(e){var a=t.active,i=e.target,n=!!i.checked;if(Array.isArray(a)){var s=null,r=t._i(a,s);i.checked?r<0&&(t.active=a.concat([s])):r>-1&&(t.active=a.slice(0,r).concat(a.slice(r+1)))}else t.active=n}}}),t._m(0)])])]),i("div",{staticClass:"EditText-PostTitle EditText-Section"},[i("div",{staticClass:"EditText-Label EditText-Label--width_fixed"},[t._v(" Заголовок ")]),i("div",{staticClass:"EditText-Input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"Input",attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),i("div",{staticClass:"EditText-Text"},[i("Vueditor",{ref:"editor"})],1),i("div",{staticClass:"EditText-Tags"},[i("div",{staticClass:"EditText-Section EditText-Section--size_half EditText-AddTags"},[i("div",{staticClass:"EditText-Label"},[t._v(" Теги: ")]),i("Autocomplete",{attrs:{words:t.tags,className:"EditText-Input"},on:{"word-selected":t.onAddTag}})],1),i("div",{staticClass:"EditText-TagsArea"},t._l(t.articleTags,(function(e,n){return i("div",{key:n,staticClass:"Tag EditText-Tag"},[i("span",{staticClass:"Tag-Text"},[t._v("#"+t._s(e))]),i("div",{staticClass:"Tag-Delete",on:{click:function(a){return t.onDeleteTag(e)}}},[i("svg",{staticClass:"Icon Icon--delete"},[i("use",{attrs:{"xlink:href":a("5754")+"#delete"}})])])])})),0)]),i("div",{staticClass:"EditText-Buttons"},[i("BaseButton",{attrs:{onClickButton:t.onCancel}},[t._v(" Отменить ")]),i("BaseButton",{attrs:{onClickButton:t.onSave}},[t._v(" Сохранить ")])],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"CheckForm-Value"},[a("div",{staticClass:"CheckForm-Info"},[t._v(" Публикация скрыта ")])])}],s=(a("99af"),a("4de4"),a("caad"),a("a9e3"),a("d3b7"),a("ac1f"),a("2532"),a("5319"),a("2909")),r=(a("96cf"),a("1da1")),c=a("5530"),o=a("2f62"),l=a("ed08"),d=function(){return a.e("baseButton").then(a.bind(null,"82ea"))},u=function(){return a.e("baseButton").then(a.bind(null,"f2a1"))},f={name:"EditPost",props:{className:{type:String,required:!1},isEditPost:{type:Boolean,required:!1,default:!0}},components:{BaseButton:d,Autocomplete:u},data:function(){return{active:0,articleTags:[],title:"",date:"",addedTag:"",word:""}},computed:Object(c["a"])({},Object(o["mapGetters"])(["article","articleIsErrored","tags","viewedErrors","blogInfo"])),watch:{$route:function(){this.isEditPost?this.getPostContent():this.clearContent()}},methods:Object(c["a"])({},Object(o["mapMutations"])(["setViewedErrors","clearArticle"]),{},Object(o["mapActions"])(["getTags","getArticle","addPost","editPost"]),{onAddTag:function(t){this.articleTags.includes(t)||(this.articleTags.push(t.replace(",","")),this.addedTag=t)},onDeleteTag:function(t){this.articleTags=this.articleTags.filter((function(e){return e!==t}))},onCancel:function(){this.$router.go(-1)},onSave:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.$refs.editor.getContent(),i=t.date,!t.isEditPost&&new Date(i)<new Date&&(i=Object(l["formatDateTime"])(new Date)),i=i.replace("T"," "),n={time:i,active:Number(!t.active),title:t.title,tags:t.articleTags,text:a},!t.isEditPost){e.next=11;break}return e.next=8,t.editPost({post:n,url:t.$route.params.id});case 8:s=e.sent,e.next=14;break;case 11:return e.next=13,t.addPost(n);case 13:s=e.sent;case 14:s&&t.clearContent();case 15:case"end":return e.stop()}}),e)})))()},getPostContent:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getArticle(t.$route.params.id);case 2:!t.articleIsErrored&&t.article&&(t.title=t.article.title,t.date=Object(l["formatDateTime"])(new Date(t.article.time)),t.articleTags=Object(s["a"])(t.article.tags),t.$refs.editor.setContent(Object(l["formatToHtml"])(t.article.text)));case 3:case"end":return e.stop()}}),e)})))()},clearContent:function(){this.clearArticle(),this.articleTags=[],this.title="",this.date=Object(l["formatDateTime"])(new Date),this.$refs.editor.setContent("")}}),mounted:function(){this.getTags(),this.isEditPost?this.getPostContent():this.clearContent()},metaInfo:function(){return this.editPost?{title:this.blogInfo?"Редактирование публикации | ".concat(this.blogInfo.title," - ").concat(this.blogInfo.subtitle):"Редактирование публикации"}:{title:this.blogInfo?"Добавление новой публикации | ".concat(this.blogInfo.title," - ").concat(this.blogInfo.subtitle):"Добавление новой публикации"}}},v=f,p=(a("2bb6"),a("2877")),g=Object(p["a"])(v,i,n,!1,null,null,null);e["default"]=g.exports},7156:function(t,e,a){var i=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var s,r;return n&&"function"==typeof(s=e.constructor)&&s!==a&&i(r=s.prototype)&&r!==a.prototype&&n(t,r),t}},a9e3:function(t,e,a){"use strict";var i=a("83ab"),n=a("da84"),s=a("94ca"),r=a("6eeb"),c=a("5135"),o=a("c6b6"),l=a("7156"),d=a("c04e"),u=a("d039"),f=a("7c73"),v=a("241c").f,p=a("06cf").f,g=a("9bf2").f,h=a("58a8").trim,T="Number",m=n[T],b=m.prototype,x=o(f(b))==T,E=function(t){var e,a,i,n,s,r,c,o,l=d(t,!1);if("string"==typeof l&&l.length>2)if(l=h(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+l}for(s=l.slice(2),r=s.length,c=0;c<r;c++)if(o=s.charCodeAt(c),o<48||o>n)return NaN;return parseInt(s,i)}return+l};if(s(T,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var C,I=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof I&&(x?u((function(){b.valueOf.call(a)})):o(a)!=T)?l(new m(E(e)),a,I):E(e)},w=i?v(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)c(m,C=w[_])&&!c(I,C)&&g(I,C,p(m,C));I.prototype=b,b.constructor=I,r(n,T,I)}},ab13:function(t,e,a){var i=a("b622"),n=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[n]=!1,"/./"[t](e)}catch(i){}}return!1}},caad:function(t,e,a){"use strict";var i=a("23e7"),n=a("4d64").includes,s=a("44d2"),r=a("ae40"),c=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!c},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")}}]);
//# sourceMappingURL=editPost.830a16f3.js.map