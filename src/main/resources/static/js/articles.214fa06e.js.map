{"version":3,"sources":["webpack:///./src/components/TheArticles.vue?fa86","webpack:///./src/components/TheArticles.vue?fccf","webpack:///src/components/TheArticles.vue","webpack:///./src/components/TheArticles.vue?3c06","webpack:///./src/components/TheArticles.vue","webpack:///./node_modules/core-js/modules/es.array.find-index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","classObject","daySelected","tagSelected","searchQuery","_e","attrs","navItems","activeNavIndex","on","selectActiveNavIndex","forModeration","myPosts","staticClass","_v","_s","formatedDate","toUpperCase","_l","item","key","id","time","user","name","title","announce","likeCount","dislikeCount","commentCount","viewCount","onModerated","moreArticles","articlesAreLoading","onLoadMore","staticRenderFns","components","BaseNavbar","BaseArticle","BaseButton","props","className","type","String","required","Array","Boolean","default","data","articlesNumber","offset","computed","str","$route","params","tag","date","search","dif","Date","toLocaleString","year","month","day","watch","findIndex","clearArticles","selectMethod","methods","value","query","makeQuery","getArticles","getValue","articlesCount","post_id","post","decision","status","moderateArticle","payload","mounted","metaInfo","component","$","$findIndex","addToUnscopables","arrayMethodUsesToLength","FIND_INDEX","SKIPS_HOLES","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"js/articles.214fa06e.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheArticles.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheArticles.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.classObject},[(!_vm.daySelected && !_vm.tagSelected && !_vm.searchQuery)?_c('BaseNavbar',{attrs:{\"className\":\"Articles-Nav\",\"navItems\":_vm.navItems,\"activeNavIndex\":_vm.activeNavIndex},on:{\"set-nav-value\":_vm.selectActiveNavIndex}}):_vm._e(),_c('div',{class:[\n      _vm.forModeration || _vm.myPosts\n        ? 'Articles-Content Articles-Content--noborder'\n        : 'Articles-Content'\n    ]},[(_vm.articlesAreErrored)?_c('div',{staticClass:\"ServerInfo\"},[_vm._v(\" Sorry, some error happened :( \")]):[(_vm.daySelected)?_c('div',{staticClass:\"Title Articles-Title\"},[_vm._v(\" Публикации \"+_vm._s(_vm.formatedDate)+\" \")]):_vm._e(),(_vm.tagSelected)?_c('div',{staticClass:\"Title Articles-Title\"},[_vm._v(\" Публикации по тэгу #\"+_vm._s(_vm.tagSelected.toUpperCase())+\" \")]):_vm._e(),(_vm.searchQuery)?_c('div',{staticClass:\"Title Articles-Title\"},[_vm._v(\" Поиск по \\\"\"+_vm._s(_vm.searchQuery)+\"\\\" \")]):_vm._e(),_vm._l((_vm.articles),function(item){return _c('BaseArticle',{key:item.id,attrs:{\"className\":'Articles-ArticlePreview',\"isPreview\":true,\"forModeration\":_vm.forModeration,\"myPosts\":_vm.myPosts,\"id\":item.id,\"time\":item.time,\"author\":item.user.name,\"title\":item.title,\"text\":item.announce,\"likeCount\":item.likeCount,\"dislikeCount\":item.dislikeCount,\"commentCount\":item.commentCount,\"viewCount\":item.viewCount},on:{\"moderated\":_vm.onModerated}})}),(_vm.moreArticles && !_vm.articlesAreLoading)?_c('div',{staticClass:\"Articles-Button\"},[_c('BaseButton',{attrs:{\"className\":'Button--mode_add-load',\"onClickButton\":_vm.onLoadMore}},[_vm._v(\" Ещё публикации (\"+_vm._s(_vm.moreArticles)+\") \")])],1):_vm._e()]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"classObject\">\n    <BaseNavbar\n      v-if=\"!daySelected && !tagSelected && !searchQuery\"\n      className=\"Articles-Nav\"\n      :navItems=\"navItems\"\n      :activeNavIndex=\"activeNavIndex\"\n      @set-nav-value=\"selectActiveNavIndex\"\n    />\n    <div\n      :class=\"[\n        forModeration || myPosts\n          ? 'Articles-Content Articles-Content--noborder'\n          : 'Articles-Content'\n      ]\"\n    >\n      <div class=\"ServerInfo\" v-if=\"articlesAreErrored\">\n        Sorry, some error happened :(\n      </div>\n      <template v-else>\n        <div v-if=\"daySelected\" class=\"Title Articles-Title\">\n          Публикации {{ formatedDate }}\n        </div>\n        <div v-if=\"tagSelected\" class=\"Title Articles-Title\">\n          Публикации по тэгу #{{ tagSelected.toUpperCase() }}\n        </div>\n        <div v-if=\"searchQuery\" class=\"Title Articles-Title\">\n          Поиск по \"{{ searchQuery }}\"\n        </div>\n        <BaseArticle\n          v-for=\"item in articles\"\n          :key=\"item.id\"\n          :className=\"'Articles-ArticlePreview'\"\n          :isPreview=\"true\"\n          :forModeration=\"forModeration\"\n          :myPosts=\"myPosts\"\n          :id=\"item.id\"\n          :time=\"item.time\"\n          :author=\"item.user.name\"\n          :title=\"item.title\"\n          :text=\"item.announce\"\n          :likeCount=\"item.likeCount\"\n          :dislikeCount=\"item.dislikeCount\"\n          :commentCount=\"item.commentCount\"\n          :viewCount=\"item.viewCount\"\n          @moderated=\"onModerated\"\n        />\n        <div v-if=\"moreArticles && !articlesAreLoading\" class=\"Articles-Button\">\n          <BaseButton\n            :className=\"'Button--mode_add-load'\"\n            :onClickButton=\"onLoadMore\"\n          >\n            Ещё публикации ({{ moreArticles }})\n          </BaseButton>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapMutations, mapActions } from \"vuex\";\nconst BaseNavbar = () =>\n  import(/* webpackChunkName: \"baseNavbar\" */ \"@/components/BaseNavbar.vue\");\nconst BaseArticle = () =>\n  import(/* webpackChunkName: \"baseArticle\" */ \"@/components/BaseArticle.vue\");\nconst BaseButton = () =>\n  import(/* webpackChunkName: \"baseButton\" */ \"@/components/BaseButton.vue\");\n\nexport default {\n  components: {\n    BaseNavbar,\n    BaseArticle,\n    BaseButton\n  },\n\n  props: {\n    className: {\n      type: String,\n      required: false\n    },\n    navItems: {\n      type: Array,\n      required: true\n    },\n    forModeration: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    myPosts: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      activeNavIndex: 0,\n      articlesNumber: 10,\n      offset: 0\n    };\n  },\n\n  computed: {\n    ...mapGetters([\n      \"articles\",\n      \"articlesCount\",\n      \"articlesAreLoading\",\n      \"articlesAreErrored\"\n    ]),\n\n    classObject() {\n      let str = \"Articles\";\n\n      if (this.className) {\n        str += ` ${this.className}`;\n      }\n\n      if (this.myPosts || this.forModeration) {\n        str += \" Wrapper\";\n      }\n\n      return str;\n    },\n\n    tagSelected() {\n      return this.$route.params.tag;\n    },\n\n    daySelected() {\n      return this.$route.params.date;\n    },\n\n    searchQuery() {\n      return this.$route.params.search;\n    },\n\n    moreArticles() {\n      let dif = this.articlesCount - this.offset - this.articlesNumber;\n      return dif > 0 ? dif : 0;\n    },\n\n    formatedDate() {\n      if (this.daySelected) {\n        return new Date(this.daySelected).toLocaleString(\"ru-RU\", {\n          year: \"numeric\",\n          month: \"2-digit\",\n          day: \"2-digit\"\n        });\n      }\n\n      return false;\n    }\n  },\n\n  watch: {\n    $route() {\n      this.activeNavIndex = this.navItems.findIndex(\n        item => item.value === this.$route.params.pathMatch\n      );\n      this.clearArticles();\n      this.offset = 0;\n      this.selectMethod();\n    }\n  },\n\n  methods: {\n    ...mapMutations([\"clearArticles\", \"clearSearchQuery\", \"clearSelectedDay\"]),\n    ...mapActions([\"getArticles\", \"moderateArticle\"]),\n\n    selectActiveNavIndex(value) {\n      this.activeNavIndex = value;\n    },\n\n    selectMethod() {\n      let query;\n\n      if (this.forModeration) query = this.makeQuery(\"status\", \"/moderation\");\n      else if (this.myPosts) query = this.makeQuery(\"status\", \"/my\");\n      else if (this.tagSelected) query = this.makeQuery(\"tag\", \"/byTag\");\n      else if (this.daySelected) query = this.makeQuery(\"date\", \"/byDate\");\n      else if (this.searchQuery) query = this.makeQuery(\"query\", \"/search\");\n      else query = this.makeQuery(\"mode\");\n\n      this.getArticles(query);\n    },\n\n    getValue() {\n      if (this.tagSelected) return this.tagSelected;\n      if (this.daySelected) return this.daySelected;\n      if (this.searchQuery) return this.searchQuery;\n      return this.navItems[this.activeNavIndex].value;\n    },\n\n    makeQuery(prop, url = \"\") {\n      const value = this.getValue();\n      return `${url}?offset=${this.offset}&limit=${this.articlesNumber}&${prop}=${value}`;\n    },\n\n    onLoadMore() {\n      if (this.articlesCount > this.offset + this.articlesNumber) {\n        this.offset += this.articlesNumber;\n        this.selectMethod();\n      }\n    },\n\n    onModerated(post) {\n      const payload = {\n        post_id: post.id,\n        decision: post.status\n      };\n\n      this.moderateArticle(payload);\n    }\n  },\n\n  mounted() {\n    this.activeNavIndex = this.navItems.findIndex(\n      item => item.value === this.$route.params.pathMatch\n    );\n    this.clearArticles();\n    this.offset = 0;\n    this.selectMethod();\n  },\n\n  metaInfo() {\n    let value;\n\n    if (this.tagSelected) value = `Публикации по тэгу #${this.tagSelected}`;\n    else if (this.forModeration) value = \"Модерирование публикаций\";\n    else if (this.myPosts) value = \"Мои публикации\";\n    else if (this.postByDate) value = `Публикации за ${this.formatedDate}`;\n    else if (this.searchQuery) value = `Искать \"${this.searchQuery}\"`;\n    else return \"DevPub - рассказы разработчиков\";\n\n    return {\n      title: `${value} | DevPub - рассказы разработчиков`\n    };\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.Articles {\n  .Nav {\n    margin-bottom: 25px;\n\n    @media (max-width: $screen-mobile) {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      justify-items: center;\n      align-items: center;\n      margin-bottom: 10px;\n    }\n\n    &-Item {\n      @media (max-width: $screen-tablet) {\n        margin-right: 10px;\n      }\n\n      @media (max-width: $screen-mobile) {\n        margin-bottom: 5px;\n      }\n    }\n  }\n\n  &-Title {\n    margin-top: 5px;\n    margin-bottom: 40px;\n\n    @media (max-width: $screen-tablet) {\n      margin-top: 25px;\n    }\n  }\n\n  &-Content {\n    height: 100%;\n    padding: 10px 7px 50px 0;\n    border-right: 1px solid var(--color-layout-primary);\n\n    @media (max-width: $screen-tablet) {\n      padding-top: 0;\n      padding-right: 0;\n      border-right: none;\n    }\n\n    &--noborder {\n      border: none;\n    }\n  }\n\n  &-ArticlePreview {\n    margin-bottom: 20px;\n  }\n\n  &-Button {\n    text-align: center;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheArticles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheArticles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TheArticles.vue?vue&type=template&id=1a7cdc11&\"\nimport script from \"./TheArticles.vue?vue&type=script&lang=js&\"\nexport * from \"./TheArticles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TheArticles.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND_INDEX);\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n"],"sourceRoot":""}